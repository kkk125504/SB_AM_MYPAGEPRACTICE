### INSERT 쿼리 구현, INSERT된 결과얻기위해 LAST_INSERT_ID() 

**1. ArticleRepository** 

```java
    @Mapper
    public interface ArticleRepository {
        @Insert("INSERT INTO article SET regDate = NOW(), updateDate = NOW(), title = #{title}, `body`= #{body}")
        public void writeArticle(String title, String body);
       
        @Select("SELECT LAST_INSERT_ID()")
		public int getLastInsertId();
```

- @Insert @update @delete 결과 값이 없기 때문에 retrun 타입을 void로 해야한다.
- Insert한 결과를 얻고자 한다. 
- SELECT LAST_INSERT_ID()는 Insert된 마지막행의 id를 구하는 함수

**2. ArticleService**

```java
    @Service
	public class ArticleService {

        public int writeArticle(String title, String body) {
            articleRepository.writeArticle(title, body);
            return articleRepository.getLastInsertId();
        }
```

- articleRepository.writeArticle(title, body) 메서드를 통하여 DB에 Insert하고
- articleRepository.getLastInsertId() 메서드를 통해 Insert된 id값을 구하고

**3. ArticleController**

```java
    @Controller
    public class UsrArticleController {

        @RequestMapping("usr/article/doAdd")
        @ResponseBody
        public Article doAdd(String title, String body) {
            int id = articleService.writeArticle(title, body);
            Article article = articleService.getArticle(id);
            return article;
        }
```

-  articleService.getArticle(id); : Insert된 마지막행의 id 토대로 select 