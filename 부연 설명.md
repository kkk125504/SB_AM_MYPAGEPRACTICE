### 게시물 마다 로그인된 회원이 좋아요/싫어요를 할 수있는지 체크

**1. 게시물에 좋아요/싫어요 선택했는지 찾는 쿼리문 **

```xml
	<select id="getSumReactionPointByMemberId" resultType="int">
		SELECT IFNULL(SUM(`point`),0) FROM reactionPoint
		WHERE relTypeCode = 'article'
		AND relId = #{id}
		AND memberId =#{actorId}
	</select>
```

- 회원번호(memberId)와 게시물번호(relId)를 통해 데이터를 조회
- 해당 쿼리문의 결과가 0 이라면 좋아요/싫어요를 선택하지 않음
- 좋아요/싫어요를 선택했다면 reactionPoint테이블에 좋아요(1), 싫어요(-1)의 기록이 남겨져 있다.
- 이때 각 게시물 마다 좋아요/싫어요 선택은 ```한번만``` 할수있기 때문에 선택을 했다면, reactionPoint테이블에 ```데이터가 하나```남겨져 있다.
- SUM()함수를 쓰지않고 `point` 컬럼만 조회시 데이터가 없다면 로우가 나타나지 않는다. 
- ```집계함수를 쓰면 값이 없어도 0을 리턴```

**2. 게시물에 좋아요/싫어요 선택했는지 여부 model객체에 추가  **

```java
	@RequestMapping("/usr/article/detail")
	public String showDetail(Model model, int id) {			
		Article article = articleService.getForPrintArticle(rq.getLoginedMemberId(), id);
		boolean actorCanMakeReaction = articleService.actorCanMakeReaction(rq.getLoginedMemberId(),id);
		model.addAttribute("actorCanMakeReaction",actorCanMakeReaction);
				~~~ 생략 ~~~
	}
```

- jsp파일에서 선택여부를 바탕으로 좋아요/싫어요 버튼 노출하기 위해 

