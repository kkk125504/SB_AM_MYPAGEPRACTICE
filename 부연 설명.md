### 리스트에서 검색 타입에 따른 총 게시물 수 파악

**1\) 검색 타입과 검색키워드 파라미터 추가**

```java
    @RequestMapping("/usr/article/list")
	public String showList(Model model, @RequestParam(defaultValue = "1") int boardId,
			@RequestParam(defaultValue = "1") int page, @RequestParam(defaultValue = "title,body") String searchKeywordType,
			@RequestParam(defaultValue = "") String searchKeyword) {
```

- 게시물을 가져올때 검색타입과 키워드를 쿼리문에 추가하기위한 파라미터를 받음
- searchKeywordType은 제목,내용,작성날짜 등등 을 의미하는 파라미터

**2\) 총 게시물 수를 파악하는 쿼리문**

```jsp
	<select id="getArticlesCount" resultType="int">
		SELECT COUNT(*) FROM article
		WHERE boardId = #{boardId}
		<if test="searchKeyword !=''">
			<choose>
				<when test="searchKeywordType==title">
				AND title LIKE CONCAT('%',#{searchKeyword},'%')
				</when>
		    	<when test="searchKeywordType==body">
		    	AND body LIKE CONCAT('%',#{searchKeyword},'%')
		    	</when>
		    	<otherwise>
		    	AND (
		    		title LIKE CONCAT('%',#{searchKeyword},'%') OR
		    		body LIKE CONCAT('%',#{searchKeyword},'%')
		    	)
		    	</otherwise>  	
			</choose>
		</if>
	</select>
```

- 파라미터searchKeyword의 값이 없다면 ```defaultValue = ""```이므로  ```if test="searchKeyword !=''"```에 해당하므로 조건문(choose)이 실행되지 않는다.
- 검색타입에 ```searchKeyword```가 포함되는 게시물 데이터를 가져옴 
- 위의 코드에서 ```if test="searchKeyword !=''"```를 작성하지 않는다면 예상되는 쿼리문은 searchKeyword의 ```defaultValue = ""```이므로

```java
	AND (
		title LIKE CONCAT('%','','%') OR
		body LIKE CONCAT('%','','%')
		)
```

- 위의 쿼리문으로 예상 하였으나 쿼리오류발생 ```defaultValue``` 의값이 제대로 적용되지 않는 것으로 보인다.
