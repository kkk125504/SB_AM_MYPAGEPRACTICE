### 회원가입시 이름, 이메일 중복체크

- 구글의 경우 아이디를 여러개 만들수있다. 하지만 email은 각각 다르다

**1. MemberService**

```java
    public int doJoin(String loginId, String loginPw, String name, String nickname, String cellphoneNum, String email) {
            // 로그인아이디 중복체크
            Member existsMember = getMemberByLoginId(loginId);
            if (existsMember != null) {
                return -1;
            }
            // 이름과 이메일 중복체크
            existsMember = getMemberByNameAndEmail(name, email);
            if(existsMember !=null) {
                return -2;
            }
            memberRepository.doJoin(loginId, loginPw, name, nickname, cellphoneNum, email);
            int id = memberRepository.getLastInsertId();
            return id;
        }
```

- MemberService.doJoin() 메소드는 int를 반환해야한다.
- 가입이되면 가입된 회원번호를 반환 
- 아이디가 중복일경우 -1 반환
- 같은이름과 같은이메일이라면 -2 를 반환

**2. MemberController**

```java
		int id = memberService.doJoin(loginId, loginPw, name, nickname, cellphoneNum, email);
		if (id == -1) {
			return "중복 되는 아이디가 있습니다.";
		}
		if (id == -2) {
			return "이미 사용중인 이름과 이메일입니다.";
		}
```

- id가 -2라면 같은 이름과 같은 이메일을 쓰고있는 회원이 있는것

**3. MemberRepository.xml**

```java
        <select id="getMemberByNameAndEmail" resultType ="com.kjh.exam.demo.vo.Member">
            SELECT * FROM `member` 
            WHERE `name` = #{name} 
            AND email = #{email} 
        </select>
```

- 입력받은 이름과 이메일을 사용하고있는 회원을 찾는 쿼리문