### 댓글 수정 기능 처리, ReplyModify__submitForm() 

**1\) ReplyController**

```java
	@RequestMapping("/usr/reply/doModify")
	@ResponseBody
	public String doModify(int id, String body, String replaceUri) {
		if (Ut.empty(id)) {
			return rq.jsHistoryBack("id가 없습니다");
		}
		if (Ut.empty(body)) {
			return rq.jsHistoryBack("내용을 입력해주세요");
		}
		Reply reply = replyService.getForPrintReply(rq.getLoginedMember(), id);

		if (reply == null) {
			return rq.jsHistoryBack(Ut.f("%d번 댓글은 존재하지 않습니다", id));
		}

		if (reply.isExtra__actorCanModify() == false) {
			return rq.jsHistoryBack("해당 댓글을 삭제할 권한이 없습니다");
		}

		ResultData modifyReplyRd = replyService.modifyReply(id,body);

		if (Ut.empty(replaceUri)) {
			switch (reply.getRelTypeCode()) {
			case "article":
				replaceUri = Ut.f("../article/detail?id=%d", reply.getRelId());
				break;
			}
		}
		return rq.jsReplace(modifyReplyRd.getMsg(), replaceUri);
	}
```

- 이전 작성했던 수정 폼에서 데이터를 전송받아  
- 댓글 삭제와 동일하게 권한 체크 후 댓글 수정

**2\) ReplyRepository**

``` java
	@Update("""
			UPDATE reply
			SET updateDate = NOW(),
			`body` = #{body}
			WHERE id = #{id}
			""")
	void modifyReply(int id, String body);
```

- 댓글을 DB에 업데이트 하는 쿼리문