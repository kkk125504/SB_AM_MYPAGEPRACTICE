### usr/article/doModify 권한 체크

**1\) UsrArticleController**

```java
        @RequestMapping("usr/article/doModify")
        @ResponseBody
        public ResultData<Article> doModify(HttpSession httpSession, int id, String title, String body) {
            boolean isLogined = false;
            int loginedMemberId = -1;
            if(httpSession.getAttribute("loginedMemberId") !=null) {
                isLogined= true;
                loginedMemberId = (int)httpSession.getAttribute("loginedMemberId");
            }

        if(isLogined==false) {
            return ResultData.from("F-A", "로그인 후 이용가능 합니다.");
        }
        Article article = articleService.getArticle(id);

        if (article == null) {
            return ResultData.from("F-1", Ut.f("%d번 게시물은 존재하지 않습니다.", id));
        }
        ResultData actorCanModifyRd = articleService.actorCanModify(loginedMemberId, article);
        if(actorCanModifyRd.isFail()){
            return actorCanModifyRd;
        }

        return articleService.modifyArticle(id, title, body);
    }
```

- 로그인 여부, 게시물 존재여부는 delete와 동일하다
- 게시물의 수정 권한을 controller가 아닌 service에서 체크
- 수정하기전 게시물에 대한 권한을 actorCanModifyRd로 결과를 받음, isFail()시 권한 없음

**2\) ArticleService**

```java
        public ResultData modifyArticle(int id, String title, String body) {

            articleRepository.modifyArticle(id, title, body);
            Article article = getArticle(id);
            return ResultData.from("S-1", Ut.f("%번 게시물 수정 했습니다.", id), article);
        }

        public ResultData actorCanModify(int loginedMemberId, Article article) {

            if (loginedMemberId != article.getMemberId()) {
                return ResultData.from("F-2", "해당 게시물에 대한 수정 권한이 없습니다.");
            }
            return ResultData.from("S-1", "수정 가능 합니다.");
        }
```

- ```actorCanModifyRd```는 수정권한이 있는지를 service측에 체크
- delete와 로직이 다르진 않으나 modify는 controller가아닌 service측에서 게시물에대한 권한을 체크 
