### usr/member/doJoin에 ResultData 적용

**1. MemberController.doJoin()**

```java
        @RequestMapping("usr/member/doJoin")
        @ResponseBody
        public ResultData doJoin(String loginId, String loginPw, String name, String nickname, String cellphoneNum,
                String email) {
            if (Ut.empty(loginId)) {
                return ResultData.from("F-1", "아이디를 입력 해주세요.");
            }
            if (Ut.empty(loginPw)) {
                return ResultData.from("F-2", "비밀번호를 입력 해주세요.");
            }
            if (Ut.empty(name)) {
                return ResultData.from("F-3", "이름을 입력 해주세요.");
            }
            if (Ut.empty(nickname)) {
                return ResultData.from("F-3", "닉네임 입력 해주세요.");
            }
            if (Ut.empty(cellphoneNum)) {
                return ResultData.from("F-4", "전화번호를 입력 해주세요.");
            }
            if (Ut.empty(email)) {
                return ResultData.from("F-5", "이메일을 입력 해주세요.");
            }
            ResultData joinRd = memberService.doJoin(loginId, loginPw, name, nickname, cellphoneNum, email);

            if (joinRd.isFail()) {
                return joinRd;
            }
            if (joinRd.isFail()) {
                return joinRd;
            }
            Member member = memberService.getMemberById((int) joinRd.getData1());
            return ResultData.newData(joinRd, member);
        }
```

- 필수데이터(아이디,비밀번호 등등)들이 있는지확인하고 그에대한 결과를 ResultData로 반환
- memberService.doJoin() 메소드의 실행 결과로 ResultData를 반환 받고
- ResultData.isFail()은 실패여부를 나타내는 메소드로 회원가입이 실패했다면 joinRd에 isFail() 는 true가 되고 실패에따른 메세지도 포함되있다.
- 만약 회원가입이 성공 했다면 ResultData로 결과를 반환해야한다. 
- 이때 가입이 성공한 회원정보도 결과로 반환 하기위해 ```Resultdata.from(joinRd.getResultCode(), joinRd.getMsg(), member) ```를 사용해도되나
- ResultData.newData(joinRd, member)를 통해 결과를 반환

**2. MemberService.doJoin()**

```java
    public ResultData doJoin(String loginId, String loginPw, String name, String nickname, String cellphoneNum, String email) {
        // 로그인아이디 중복체크
        Member existsMember = getMemberByLoginId(loginId);
        if (existsMember != null) {
            return ResultData.from("F-6", Ut.f("중복되는 아이디(%s)가 있습니다", loginId));
        }
        // 이름과 이메일 중복체크
        existsMember = getMemberByNameAndEmail(name, email);
        if (existsMember != null) {
            return ResultData.from("F-7", Ut.f("중복되는 이름(%s)과 이메일(%s)이 있습니다", name, email));
        }
        memberRepository.doJoin(loginId, loginPw, name, nickname, cellphoneNum, email);
        int id = memberRepository.getLastInsertId();

        return ResultData.from("S-1", Ut.f("%s님 회원가입 성공", nickname),id);
    }
```

- 아이디 중복체크 , 이름과 이메일 중복체크 후 결과를 ResultData로 반환
- 회원가입 성공했다면 가입된 회원의 아이디를 포함하여 반환

**3.ResultData클래스**

```java
  	  public static ResultData newData(ResultData Rd, Object data1) {

            return ResultData.from(Rd.getResultCode(),Rd.getMsg(),data1);
        }
```

- newData 메소드는 ResultData타입과 Object타입을 매개변수로 받음
- 내부적으로 from메소드에 인자로 ResultData Rd의 데이터들이 사용됨