### 로그인, 로그아웃에 Rq 적용 및 로그아웃 후 메인페이지로 이동

**1\) 로그인, 로그아웃에 Rq 적용**

```java
        public String doLogin(HttpServletRequest req, String loginId, String loginPw) {
            Rq rq = (Rq) req.getAttribute("rq");

            if (rq.isLogined()) {
                return Ut.jsHistoryBack("이미 로그인 되었습니다.");
            }
```

- rq객체를 통해 ```로그인 정보```를 가져옴

**2\) rq.login(), rq.logout()**

```java
   		public void login(Member member) {
            session.setAttribute("loginedMemberId", member.getId());
            session.setAttribute("loginedMemberLoginId", member.getLoginId());		
        }

        public void logout() {
            session.removeAttribute("loginedMemberId");
            session.removeAttribute("loginedMemberLoginId");		
        }
```

- 로그인,로그아웃 기능을 rq객체에 ``` login() , logout()``` 메소드를 만들어 사용
- rq객체에는 ```HttpSevletRequest객체```가 저장되있어 HttpSevletRequest객체를 통해 ```HttpSession```을 가져오고
- login() , logout()메소드를 HttpSession을 통해  구현

**3\) 로그아웃 후 메인페이지로 이동**

```java
@RequestMapping("/usr/member/doLogout")
	@ResponseBody
	public String doLogout(HttpServletRequest req) {
		Rq rq = (Rq) req.getAttribute("rq");

		if (rq.isLogined() == false) {
			return Ut.jsHistoryBack("로그아웃 상태 입니다.");
		}

		rq.logout();

		return Ut.jsReplace("로그아웃 했습니다.", "/");
	}
```

- 위에 작성한 메서드 ```rq.logout()``` 통해 로그아웃을 하고
-  Ut.jsReplace("로그아웃 했습니다.", "/"); 를 통해 로그아웃후 메인페이지로 이동

