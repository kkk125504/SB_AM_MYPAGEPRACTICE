### 로그인 아이디 중복 체크

**1.MemberService**

```java
        public int doJoin(String loginId, String loginPw, String name, String nickname, String cellphoneNum, String email) {
                Member existsMember= getMemberByLoginId(loginId);
                if(existsMember !=null) {
                    return -1;
                }
                memberRepository.doJoin(loginId, loginPw, name, nickname, cellphoneNum, email);
                int id = memberRepository.getLastInsertId();
                return id;
            }
        private Member getMemberByLoginId(String loginId) {
                Member member = memberRepository.getMemberByLoginId(loginId);
                return member;
            }	
```

- getMemberByLoginId(loginId) 메소드를 통해
- DB에 insert하기전에 사용하려는 loginId를 가지고있는 회원이 있나 확인( existsMember )
- 이미 아이디를 사용하고 있는 회원이 있다면 -1을 리턴
- 없다면 insert한후 마지막행의 id를 리턴

**2.MemberController**

```java
        public Object doJoin(String loginId, String loginPw, String name, String nickname, String cellphoneNum,
                    String email) {
                int id = memberService.doJoin(loginId, loginPw, name, nickname, cellphoneNum, email);

                if(id == -1) {
                    return "중복 되는 아이디가 있습니다.";
                }
                Member member = memberService.getMemberById(id);
                return member;
            }
```

- memberService.doJoin()의 반환값이 -1인것을 아이디 중복을 의미

**3.MemberRepostiory.xml**

```java
	<select id="getMemberByLoginId" resultType ="com.kjh.exam.demo.vo.Member">
		SELECT * FROM `member` 
		WHERE loginId = #{loginId}
	</select>
```

- xml에 loginId를 토대로 회원데이터를 가져오는 쿼리문 추가